<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title lang="en">Nexenta - Troubleshooting and Support Request</title>
    <meta name="description" content="Nexenta">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="author" content="">
    <link href="/all.css?a" rel="stylesheet">
    <link href="/resources/images/favicon.ico" rel="shortcut icon">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" rel="stylesheet"/>
</head>
<body>


<header>
    <section class="container-docs">
        
<section class="title">
    <a href="https://nexenta.com" title="nexenta.com">
        <img src="/resources/images/logo-nexenta-with-title.png"/>
    </a>
    
</section>
<section class="container-search">
  <input id="search"/>
</section>

    </section>
</header>


<section class="content">
    
<section class="docs">
    <section class="container-docs">
        <nav><ul><li><p class="root-category">Cinder</p><ul><li><a href=/openstack/docs/cinder/overview.html><p>Overview</p></a></li><li><a href=/openstack/docs/cinder/nexentastor-5.x.html><p>NexentaStor 5.x</p></a></li><li><a href=/openstack/docs/cinder/nexentastor-4.x.html><p>NexentaStor 4.x</p></a></li><li><a href=/openstack/docs/cinder/nexentaedge-2.x.html><p>NexentaEdge 2.x</p></a></li><li><a href=/openstack/docs/cinder/iscsi-multipath.html><p>iSCSI Multipath</p></a></li><li><a href=/openstack/docs/cinder/cinder-backup.html><p>Cinder Backup</p></a></li><li><a href=/openstack/docs/cinder/multiple-nodes.html><p>Multiple Cinder Nodes</p></a></li><li><a href=/openstack/docs/cinder/issues.html><p>Known Issues</p></a></li></ul></li><li><p class="root-category">Manila</p><ul><li><a href=/openstack/docs/manila/overview.html><p>Overview</p></a></li><li><a href=/openstack/docs/manila/nexentastor-4.x.html><p>NexentaStor 4.x</p></a></li><li><a href=/openstack/docs/manila/nexentastor-5.x.html><p>NexentaStor 5.x</p></a></li></ul></li><li><p class="root-category">Other</p><ul><li><a href=/openstack/docs/other/escalating-issue-to-support.html class="active"><p>Troubleshooting and Support Request</p></a></li><li><a href=/openstack/docs/other/glance.html><p>Glance</p></a></li><li><a href=/openstack/docs/other/hpr-and-openstack.html><p>HPR and OpenStack</p></a></li><li><a href=/openstack/docs/other/upgrading-4.x-to-5.x.html><p>Upgrading 4.x to 5.x</p></a></li></ul></li></ul></nav>
        <article itemscope itemtype="http://schema.org/Article">
            <h1 itemprop="name">Troubleshooting and Support Request</h1>
            <h1>Troubleshooting</h1>
<p>Check Openstack log files for error messages. Most of the errors related to storage are in Cinder or Nova logs.</p>
<p><strong>Location of Openstack log files for SysV distros:</strong></p>
<table>
<thead>
<tr><th>Project</th><th>Directory</th><th>Log Files</th></tr>
</thead>
<tbody>
<tr><td>Cinder API</td><td>/var/log/cinder</td><td>cinder-api.log</td></tr>
<tr><td>Cinder Backup</td><td>/var/log/cinder</td><td>cinder-backup.log</td></tr>
<tr><td>Cinder Scheduler</td><td>/var/log/cinder</td><td>cinder-scheduler.log</td></tr>
<tr><td>Cinder Volume</td><td>/var/log/cinder</td><td>cinder-volume.log</td></tr>
<tr><td>Nova Compute</td><td>/var/log/nova</td><td>nova-compute.log</td></tr>
</tbody>
</table>
<p>Shell command to check errors:</p>
<pre><code><span class="hljs-meta">$</span><span class="bash"> grep -r Traceback /var/<span class="hljs-built_in">log</span>/{cinder,nova}/*.<span class="hljs-built_in">log</span></span>
</code></pre>
<p><strong>Location of Openstack log files for systemd distros:</strong></p>
<table>
<thead>
<tr><th>Project</th><th>Service name (CentOS/Fedora/SUSE/RedHat)</th><th>Service name (Debian/Ubuntu)</th></tr>
</thead>
<tbody>
<tr><td>Cinder API</td><td>openstack-cinder-api</td><td>cinder-api</td></tr>
<tr><td>Cinder Backup</td><td>openstack-cinder-backup</td><td>cinder-backup</td></tr>
<tr><td>Cinder Scheduler</td><td>openstack-cinder-scheduler</td><td>cinder-scheduler</td></tr>
<tr><td>Cinder Volume</td><td>openstack-cinder-volume</td><td>cinder-volume</td></tr>
<tr><td>Nova Compute</td><td>openstack-nova-compute</td><td>nova-compute</td></tr>
</tbody>
</table>
<p>Shell command to check error:</p>
<pre><code>$ journalctl -a -u cinder-<span class="hljs-keyword">volume</span><span class="bash"> | grep Traceback
</span></code></pre>
<p>Note: the most effective way to find Python tracebacks from text is the <a href="https://pypi.org/project/tbgrep/">tbgrep</a> command-line tool:</p>
<pre><code><span class="hljs-meta">$</span><span class="bash"> sudo pip install tbgrep</span>
<span class="hljs-meta">$</span><span class="bash"> tbgrep /var/<span class="hljs-built_in">log</span>/{cinder,nova}/*.<span class="hljs-built_in">log</span></span>
<span class="hljs-meta">$</span><span class="bash"> journalctl -a -u cinder-volume | tbgrep</span>
</code></pre>
<p>If the error is not self explanatory, enable the debug logging, restart the service and try to reproduce the error. Debug loggings will trace all calls to Nexenta, which allows to narrow down the possible cause of the error.</p>
<p>To enable debug in cinder, add the following line to cinder.conf:</p>
<pre><code><span class="hljs-section">[DEFAULT]</span>
<span class="hljs-attr">debug</span> = <span class="hljs-literal">True</span>
</code></pre>
<p>And restart cinder volume service.</p>
<p>SysV distros: <code>sudo service cinder-volume restart</code></p>
<p>Systemd distros: <code>sudo systemctl restart cinder-volume</code> or <code>sudo systemctl restart openstack-cinder-volume</code></p>
<h1>Support Request</h1>
<p>When creating a support request please provide the following information:</p>
<ul>
<li><p>NexentaStor/NexentaEdge version</p></li>
<li><p>Support bundle collected from NexentaStor/NexentaEdge</p></li>
<li><p>OpenStack version (e.g. Icehouse, Juno, Kilo, Liberty, Mitaka, Newton, Ocata, Pike or Queens)</p></li>
<li><p>nova-manage version (for reference use - <a href="https://wiki.openstack.org/wiki/Releases">https://wiki.openstack.org/wiki/Releases</a>)</p></li>
<li><p>Cinder driver version: go to appropriate driver location and copy-paste comments from the top of file:</p>
<table>
<thead>
<tr><th>Nexenta Version</th><th>Backend</th><th>Driver Location</th></tr>
</thead>
<tbody>
<tr><td>NexentaStor4</td><td>NFS</td><td>/usr/lib/python2.7/dist-packages/cinder/volume/drivers/nexenta/nfs.py</td></tr>
<tr><td>NexentaStor4</td><td>iSCSI</td><td>/usr/lib/python2.7/dist-packages/cinder/volume/drivers/nexenta/iscsi.py</td></tr>
<tr><td>NexentaStor5</td><td>NFS</td><td>/usr/lib/python2.7/dist-packages/cinder/volume/drivers/nexenta/ns5/nfs.py</td></tr>
<tr><td>NexentaStor5</td><td>iSCSI</td><td>/usr/lib/python2.7/dist-packages/cinder/volume/drivers/nexenta/ns5/iscsi.py</td></tr>
<tr><td>NexentaEdge</td><td>iSCSI</td><td>/usr/lib/python2.7/dist-packages/cinder/volume/drivers/nexenta/nexentaedge/iscsi.py</td></tr>
<tr><td>NexentaEdge</td><td>NBD</td><td>/usr/lib/python2.7/dist-packages/cinder/volume/drivers/nexenta/nexentaedge/nbd.py</td></tr>
</tbody>
</table>
</li>
<li><p>Openstack service type (e.g. Cinder, Glance, Manila or Swift)</p></li>
<li><p>Collect OS version (e.g. Ubuntu 14.04, RHEL 7.0.x, CentOS 7.0.x) and OS specific information:</p>
<ul>
<li><code>cat cat /etc/lsb-release</code></li>
<li><code>uname -a</code></li>
<li><code>dpkg -l</code> or <code>rpm -qa</code></li>
</ul></li>
<li><p>Collect copy of Cinder drivers folder</p>
<ul>
<li>/usr/lib/python2.7/dist-packages/cinder/volume/drivers/nexenta</li>
</ul></li>
<li><p>Collect Cinder configuration file:</p>
<ul>
<li>/etc/cinder/cinder.conf (default path)</li>
</ul></li>
<li><p>Collect Cinder and Nova log files:</p>
<ul>
<li>For SysV distros: <code>/var/log/cinder</code> and <code>/var/log/nova</code></li>
<li>For Debian/Ubuntu and systemd:
<pre><code><span class="hljs-keyword">for</span> <span class="hljs-built_in">log</span> <span class="hljs-keyword">in</span> cinder-api cinder-backup cinder-scheduler cinder-volume nova-compute; <span class="hljs-keyword">do</span> 
    journalctl -a -u <span class="hljs-variable">$log</span> &gt; <span class="hljs-variable">$log</span>.txt
<span class="hljs-keyword">done</span>
</code></pre></li>
<li>For CentOS/Fedora/SUSE/RedHat and systemd:
<pre><code><span class="hljs-keyword">for</span> <span class="hljs-built_in">log</span> <span class="hljs-keyword">in</span> openstack-cinder-api openstack-cinder-backup openstack-cinder-scheduler cinder-volume openstack-nova-compute; <span class="hljs-keyword">do</span>
  journalctl -a -u <span class="hljs-variable">$log</span> &gt; <span class="hljs-variable">$log</span>.txt
<span class="hljs-keyword">done</span>
</code></pre></li>
</ul></li>
<li><p>Steps to reproduce the issue, screenshot of console log, any custom scripts that customer ran, etc</p></li>
</ul>

        </article>
    </section>
</section>

</section>


<footer>
    <section class="container-normal container-flex">
        <nav></nav>
        <section>
            &copy;
            <time><script>document.write(new Date().getFullYear())</script></time>
            Nexenta Systems, Inc.
        </section>
    </section>
</footer>


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
  apiKey: '8a7bb77f6b91c0b17df8a3fd0bcb6743',
  indexName: 'nexenta',
  inputSelector: '#search',
  debug: false // Set debug to true if you want to inspect the dropdown
});
</script>

</body>
<script>
  if (window.location.hostname !== 'localhost') {
    (function (i, s, o, g, r, a, m) {i['GoogleAnalyticsObject'] = r;i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)}, i[r].l = 1 * new Date();a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];a.async = 1;a.src = g;m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', '', 'nexenta.github.io');
    ga('send', 'pageview');
  }
</script>
</html>
